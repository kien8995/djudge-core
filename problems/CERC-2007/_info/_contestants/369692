#include <cstdio>
#include <cctype>
#include <cstring>
#include <algorithm>
using namespace std;

int main()
{
	for (;;)
	{
		char s[128];
		char out[128];
		int c = 0;

		long long n;
		scanf("%s", s);
		
		int j=0;
		while (isalpha(s[j])) j++;
		int b;
		sscanf(s+j, "%d", &b);
		s[j] = 0;

		//puts(b);
		//printf("[%s] %d %d\n", s, b, n);

		if (strcmp("end", s)==0) break;


		if (strcmp("to", s)==0)
		{
				scanf("%lld", &n);
			
				if (n==0)
				{
					puts("0");
					continue;
				}
			
				static long long licz[10][64],max[10][64];
				int pozycja = -b;
				int liczba = 1;
				
				for(int i=0;i<30;i++){
					for(int j=1;j<pozycja;j++){
						licz[j][i] = j*liczba;
						//printf("%d\n",licz[j][i]);
					}
					liczba *= b;
					
				}
				for(int i=0;i<2;i++){
					for(int j=0;j<pozycja;j++)
					max[j][i] = licz[j][i];
				}
				for(int i=2;i<30;i++){
					for(int j=1;j<pozycja;j++){
						max[j][i] = licz[j][i] + licz[pozycja-1][i-2];
					}
				}					

			int h[50];
			memset(h, 0, sizeof(h));

			while(n){
				long long maxl,maxi=0,maxj=0;
				if(n>0)maxl = 2000000000;
				if(n<0)maxl = -2000000000;	
				for(int i=0;i<30;i++){
					for(int j=0;j<pozycja;j++){
						if(n>0){  
						  if(n <= max[j][i] && max[j][i] < maxl){
							maxl = max[j][i];
							
							maxj = j; maxi = i;
						  }
						} else	{
						   if(n >= max[j][i] &&  max[j][i] > maxl){
							maxl = max[j][i];

							maxj = j; maxi = i;
						  }

						}
						//printf("%d ",maxl);	

						

					}
				}
				n -= licz[maxj][maxi]; 

				h[maxi] = maxj;				


//				for(int v=0;v	
//				printf("%d %d %d\n",n,maxi,maxj);
				
			}

			int q = 50-1;
			while (h[q]==0) q--;
			while (q>=0) printf("%d", h[q--]);
			puts("");
			
		}
		if(strcmp("from", s) == 0) {
			char n[1000];
			scanf("%s", n);

			if (n[0]=='0')
			{
				puts("0");
				continue;
			}

			long long k = 0;
			int i = 1;

			int q = strlen(n)-1;
			for (int j=q; j>=0; j--)			
			{
				int z = n[j]-'0';
				k += z * i;
				i *= b;
			}
			printf("%lld\n",k);
			
		}
	}

	return 0;
}
