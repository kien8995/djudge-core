#include <cstdio>
#include <cstdlib>
using namespace std;

int R, C;
char mreza[20][20];
char dvojka[20][20];
int best;

void change(char mr[][20], int r, int c) {
  int i;
  for (i=c-1; i<=c+1; i++) {
    if (0 <= i && i < C) mr[r][i] = 1 - mr[r][i];
  }
  if (0 <= r+1 && r+1 < R) mr[r+1][c] = 1 - mr[r+1][c];
  if (0 <= r-1 && r-1 < R) mr[r-1][c] = 1 - mr[r-1][c];
}

void fazaDve(int cnt) {
  // copy
  int i, j;
  for (i=0; i<R; i++)
    for (j=0; j<C; j++)
      dvojka[i][j] = mreza[i][j];

  // clear other lines
  for (i=1; i<R; i++) {
    for (j=0; j<C; j++) {
      if (dvojka[i-1][j] == 1) {
        cnt++;
        change(dvojka, i, j);
      }
    }
  }

  // check last line
  bool ok = true;
  for (j=0; j<C; j++) {
    if (dvojka[R-1][j] == 1) {
      ok = false;
      break;
    }
  }

  if (ok) {
    if (cnt < best) best = cnt;
  }
}

void fazaEna(int pos, int cnt) {
  if (pos >= C) {
    fazaDve(cnt);
    return;
  }
  fazaEna(pos+1, cnt);
  change(mreza, 0, pos);
  fazaEna(pos+1, cnt+1);
  change(mreza, 0, pos);
}

int main() {
  int i, j;

  while (true) {
    scanf("%d %d\n", &R, &C);
    if (R==0 && C==0) break; // odjebi!!!
    best = 1000000000;
    for (i=0; i<R; i++) {
      fgets(mreza[i], 20, stdin);
      for (j=0; j<C; j++) {
        if (mreza[i][j] == 'X') mreza[i][j] = 1; else mreza[i][j] = 0;
      }
    }
    fazaEna(0, 0);
    if (best == 1000000000) {
      printf("Damaged billboard.\n");
    } else {
      printf("You have to tap %d tiles.\n", best);
    }
  }
  return 0;
}
