#include<cstdio>
#include<cstdlib>
#include<string>
#include<cstring>
#include<vector>
#include<cmath>
#include<cctype>
#include<queue>
#include<algorithm>
#include<set>
#include<map>
#include<numeric>

using namespace std;

#define M 37

#define FOR(i, a, b) for(int i=(a); i<=(b); i++)
#define FORD(i, a, b) for(int i=(a); i>=(b); i--)
#define REP(i, n) for(int i=0; i<(n); i++)
#define ALL(x) (x).begin(), (x).end()
#define MP make_pair
#define PB push_back
#define X first
#define Y second
#define FI first
#define SE second
#define FORE(i, c) for(__typeof((c).begin) i = (c).begin(); i!=(c).end(); ++i)
#define SIZE(x) ((int)(x).size())

typedef vector<int> VI;
typedef long long ll;
typedef pair<int, int> PII;

int t[M][M],u[M][M];

int main()
{
    int n,m;
    char s[M];
    while(scanf("%d %d",&n,&m) && n)
    {
	int ret=n*m+3;
	REP(i,n) 
	{
	    scanf("%s",s);
	    REP(j,m) t[i][j]=s[j]=='X';
	}
	if(m>n)
	{
	    int x=max(m,n);
	    REP(i,x) FOR(j,i+1,x) swap(t[i][j],t[j][i]);
	    swap(m,n);
	}
//	printf("%d %d\n",n,m);
//	REP(i,n) {REP(j,n) printf("%d",t[i][j]); printf("\n");}
	REP(ma,1<<m)
	{
//	    printf("%d: \n",ma);
	    int x=0;
	    REP(i,n) 
	    {
		REP(j,m) u[i][j]=t[i][j];
//		REP(j,m) printf("%d ",u[i][j]);
//			printf("\n");
	    }
	    REP(j,m) if(ma & (1<<j))
	    {
//		printf(" %d %d \n",0,j);
		x++;
		u[0][j]++;
		u[1][j]++;
		if(j) u[0][j-1]++;
		u[0][j+1]++;
	    }
	    REP(i,n-1) REP(j,m) if(u[i][j]&1)
	    {
//		printf(" %d %d\n",i+1,j);
		x++;
		++u[i][j];
		u[i+1][j]++;
		u[i+2][j]++;
		if(j) u[i+1][j-1]++;
		u[i+1][j+1]++;
	    }
	    int ok=1;
	    REP(j,m) if(u[n-1][j]&1) 
	    {
		ok=0;
		break;
	    }
//	    printf("ok %d\n\n",ok);
	    if(ok) ret<?=x;
	}
	if(ret==n*m+3) printf("Damaged billboard.\n");
	else printf("You have to tap %d tiles.\n",ret);
    }
    return 0;
}
