#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>

char f[16][16];
int R,C;

char l[2][16];

int main(void) {
  while (scanf("%d%d", &R, &C), R) {
    for (int i=0;i<R;i++)
      for (int j=0;j<C;j++) {
	while (f[i][j]=getchar(), isspace(f[i][j])) ;	
	f[i][j]=f[i][j]=='X';
      }

    int L=1<<C;
    int best=-1;
    for (int m=0;m<L;m++) {
      int moves=0;
      memcpy(l[0], f[0], C);
      memcpy(l[1], f[1], C);
      for (int mc=m, c=0; c<C; c++, mc>>=1) {
	if (mc&1) {
	  moves++;
	  if (c>0) l[0][c-1]^=1;
	  l[0][c]^=1;
	  if (c<C-1) l[0][c+1]^=1;
	  l[1][c]^=1;
	}
      }
      for (int i=1;i<R;i++) {
	for (int j=0;j<C;j++) if (l[(i-1)&1][j]) {
	  moves++;
	  if (j>0) l[i&1][j-1]^=1;
	  l[i&1][j]^=1;
	  if (j<C-1) l[i&1][j+1]^=1;
	}
	for (int j=0;j<C;j++) l[(i+1)&1][j]^=f[i+1][j];
      }
      int done=1;
      for (int j=0;j<C;j++) done&=(l[(R-1)&1][j]==0);
      if (!done) continue;
      if (best==-1) best=moves;
      else if (moves<best) best=moves;
    }

    if (best<0) puts("Damaged billboard.");
    else printf("You have to tap %d tiles.\n", best);
  }

  return 0;
}
